# 坑

## nacos服务注册与发现

- pom.xml添加依赖，涉及到spring boot和spring cloud alibab的版本问题

- [版本说明](https://github.com/alibaba/spring-cloud-alibaba/wiki/%E7%89%88%E6%9C%AC%E8%AF%B4%E6%98%8E)

  - ```yaml
    <!-- Spring Cloud Begin -->
    <dependency>
    <groupId>com.alibaba.cloud</groupId>
    <artifactId>spring-cloud-starter-alibaba-nacos-discovery</artifactId>
    <version>2.2.3.RELEASE</version>
    </dependency>
    
    <dependency>
        <groupId>com.alibaba.cloud</groupId>
        <artifactId>spring-cloud-starter-alibaba-nacos-config</artifactId>
        <version>2.2.3.RELEASE</version>
    </dependency>
    
    <!-- Spring Cloud End -->
    ```

- nacos版本，和spring cloud alibaba需要对应

## 使用Feign作服务消费者

- pom.xml依赖，需要注意feign的版本和nacos的版本

- 另外，不知道什么原因，单单引入feign汇报缺少依赖的错，需要加上ribbon的依赖，最终如下：

  - ```yaml
    <!-- Spring Cloud Begin -->
    <dependency>
        <groupId>com.alibaba.cloud</groupId>
        <artifactId>spring-cloud-starter-alibaba-nacos-discovery</artifactId>
        <version>2.2.3.RELEASE</version>
    </dependency>
    
    
    <dependency>
        <groupId>org.springframework.cloud</groupId>
        <artifactId>spring-cloud-starter-openfeign</artifactId>
        <version>2.0.0.RELEASE</version>
    </dependency>
    
    <dependency>
        <groupId>org.springframework.cloud</groupId>
        <artifactId>spring-cloud-starter-netflix-ribbon</artifactId>
        <version>2.0.0.RELEASE</version>
    </dependency>
    
    
    <!-- Spring Cloud End -->
    ```

    

## Sentinel熔断器

- 打开熔断器网页面板

```bash
java -Dserver.port=8080 -Dcsp.sentinel.dashboard.server=localhost:8080 -Dproject.name=sentinel-dashboard -jar sentinel-dashboard.jar
```

网址：http://localhost:8080/#/dashboard/home